pipeline {
    agent any

    stages{
        stage("charts Clone"){
            steps{
                script{
                    sh "sudo rm -rf mocktest-frontend"
                    sh "git clone https://github.com/Harsha190202/mocktest-frontend.git -b ${env.ChartsBranch}"
                }
            }
        }
        stage("Front-end clone") {
            steps{
                script{
                    sh "sudo rm -rf charts"
                    sh "git clone https://github.com/Harsha190202/charts.git -b ${env.FrontendBranch}"
                }
            }
        }
        
        stage("frontend-dependencies"){
            steps{
                dir("./mocktest-frontend/"){
                    script{
                        sh "npm install"
                    }
                }
            }
        }
        stage("front-end-build"){
            steps {
                dir("./mocktest-frontend/"){
                    script{
                        sh "npm run build"
                    }
                }
            }
        }
        stage("Docker Build") {
            steps {
                dir("./mocktest-frontend/"){
                script{
                    sh "aws ecr get-login-password --region ap-south-1 --profile shared-s3 | docker login --username AWS --password-stdin 112606330682.dkr.ecr.ap-south-1.amazonaws.com"
                    sh "docker build -f applications/mocktest-frontend -t mocktest-frontend ." 
                    sh "docker tag mocktest-frontend:latest "
                    sh "docker push"
                }
            }
            }
        }

        
        stage("Deployment") {
            steps {
                dir("/CHARTS/") {
                    script{
                        sh "sed command"
                    }
                }
            }
        }
        
    }

}


